<div class="page-wrapper">
  <section class="container">
    <h1>üé¨ –ê—Ñ–∏—à–∞ –∫–∏–Ω–æ—Ç–µ–∞—Ç—Ä–∞</h1>

    <!-- –§–∏–ª—å—Ç—Ä—ã -->
    @if (!isLoading && movies.length > 0) {
      <div class="filters-section">
        <div class="filters">
          <button class="btn" [class.active]="activeFilter === 'today'" (click)="setFilter('today')">
            –°–µ–≥–æ–¥–Ω—è
            <span class="badge" *ngIf="getTodaysSessionCount() > 0">
              {{ getTodaysSessionCount() }}
            </span>
          </button>

          <button class="btn" [class.active]="activeFilter === 'tomorrow'" (click)="setFilter('tomorrow')">
            –ó–∞–≤—Ç—Ä–∞
            <span class="badge" *ngIf="getTomorrowsSessionCount() > 0">
              {{ getTomorrowsSessionCount() }}
            </span>
          </button>

          <button class="btn" [class.active]="activeFilter === 'upcoming'" (click)="setFilter('upcoming')">
            –°–∫–æ—Ä–æ
            <span class="badge" *ngIf="getUpcomingSessionCount() > 0">
              {{ getUpcomingSessionCount() }}
            </span>
          </button>

          <button class="btn" [class.active]="activeFilter === 'all'" (click)="setFilter('all')">
            –í—Å–µ —Å–µ–∞–Ω—Å—ã
          </button>
        </div>
      </div>
    }

    <!-- –ó–∞–≥—Ä—É–∑–∫–∞ -->
    @if (isLoading) {
      <div class="loading-state">
        <div class="spinner"></div>
        <p>–ó–∞–≥—Ä—É–∂–∞–µ–º —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Å–µ–∞–Ω—Å–æ–≤...</p>
      </div>
    }

    <!-- –ö–æ–Ω—Ç–µ–Ω—Ç -->
    @if (!isLoading) {
      <div class="content">

        <!-- –°–æ–æ–±—â–µ–Ω–∏–µ, –µ—Å–ª–∏ –Ω–µ—Ç —Ñ–∏–ª—å–º–æ–≤ -->
        @if (movies.length === 0) {
          <div class="empty-state">
            <div class="empty-icon">üé≠</div>
            <h3>–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–µ–∞–Ω—Å–æ–≤</h3>
            <p>–í –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è —Å–µ–∞–Ω—Å–æ–≤ –Ω–µ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ</p>
          </div>
        }

        <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ -->
        @if (movies.length > 0) {

          @if (filteredMovies.length > 0) {
            <section class="posters">
              @for (movie of filteredMovies; track movie.filmId) {
                <app-movie-card
                  [movie]="movie"
                  [showSessions]="true"
                  [sessionDates]="getMovieSessionDatesForCard(movie)"
                  [activeFilter]="activeFilter"
                ></app-movie-card>
              }
            </section>
          }
        }
      </div>
    }
  </section>
</div>
